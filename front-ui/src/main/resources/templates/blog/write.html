<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>博客-喜欢分享</title>
    <script type="text/javascript" th:src="@{/common/meta-icon.js}" src="../static/common/meta-icon.js"></script>
    <link rel="stylesheet" th:href="@{/common/jQuery-tagsInput/dist/jquery.tagsinput.min.css}" href="../../static/common/jQuery-tagsInput/dist/jquery.tagsinput.min.css" />
    <link rel="stylesheet" th:href="@{/common/select2/dist/css/select2.min.css}" href="../../static/common/select2/dist/css/select2.min.css" />
    <link rel="stylesheet" th:href="@{/common/bootstrap-toggle/css/bootstrap-toggle.min.css}" href="../../static/common/bootstrap-toggle/css/bootstrap-toggle.min.css" />
    <link rel="stylesheet" th:href="@{/blog/solarized-dark.css}" href="../../static/blog/solarized-dark.css" />
    <script th:src="@{/jquery/jquery.min.js}" src="../../static/common/jquery/jquery.min.js"></script>
    <link th:href="@{/bootstrap/css/bootstrap.min.css}" href="../../static/common/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" th:href="@{/font-awesome/css/font-awesome.min.css}" href="../../static/common/font-awesome/css/font-awesome.min.css" />
    <link rel="stylesheet" th:href="@{/blog/read.css}" href="../../static/blog/read.css" />
</head>
</head>

<body>
    <script type="text/javascript" th:src="@{/common/header.js}" src="../../static/common/header.js"></script>
    <div class="wcf-container">
        <div id="wrapper">
            <script type="text/javascript" th:src="@{/blog/left.js}" src="../../static/blog/left.js"></script>
            <div class="read-management-container">
                <div class="col-md-12">
                    <h4 th:text="${article.status==null}?'文章发布':'编辑文章'"></h4>
                </div>
                <div class="col-md-12 mt-20">
                    <form id="articleForm" role="form" novalidate="novalidate">
                        <input type="hidden" name="id" id="id" th:value="${article.id}">
                        <input type="hidden" name="categories" id="categories" />
                        <input type="hidden" name="status" id="status" th:value="${article.status!=null and article.status!=''}?${article.status}:''" />
                        <input type="hidden" name="allowComment" id="allowComment" />
                        <input type="hidden" name="allowSee" id="allowSee" />
                        <div class="form-group col-md-12 title-categories">
                            <div class="col-md-4">
                                <input type="text" class="form-control wcf-input" placeholder="请输入文章标题" name="title" id="title"
                                    required="required" aria-required="true" th:value="${article.title}" />
                            </div>
                            <div class="col-md-4">
                                <select id="multiple-sel" class="select2 form-control" multiple="multiple" required="required"
                                    aria-required="true" data-placeholder="请选择分类...">
                                    <th:block th:if="${ null == categories}">
                                        <th:block th:each="category : ${categories}">
                                            <option th:value="${category.name}" th:text="${category.name}"></option>
                                        </th:block>
                                    </th:block>
                                    <th:block th:if="${null != categories}">
                                        <th:block th:each="category : ${categories}">
                                            <option th:value="${category.name}" th:text="${category.name}" th:selected="${article.categories==category.name}?true:false"></option>
                                        </th:block>
                                    </th:block>
                                </select>
                            </div>
                        </div>
                        <div class="form-group col-md-12 keywords">
                            <div class="col-md-8">
                                <fieldset class="wcf-fieldset">
                                    <legend class="wcf-legend">关键字</legend>
                                    <input name="keywords" id="keywords" type="text" class="wcf-input-s" placeholder="请输入文章关键字"
                                        th:value="${article.keywords!=null}?${article.keywords}:''" />
                                </fieldset>
                            </div>
                        </div>

                        <!--文章内容-->
                        <div class="clearfix"></div>
                        <div class="form-group col-md-12">
                            <div class="col-md-8 markdown">
                                <textarea style="height: 450px" autocomplete="off" id="text" name="text" class="markdown-textarea"
                                    th:utext="${article.text!=null}?${article.text}:''"></textarea>
                            </div>
                        </div>

                        <div class="clearfix"></div>
                        <div class="col-md-12">
                            <div class="form-group col-md-2 col-sm-4">
                                <input type="checkbox" th:checked="${article.allowSee=='private'}?false:true"
                                    data-toggle="toggle" id="see" name="see" data-on="所有人可见" data-off="仅作者可见"
                                    data-onstyle="success" data-offstyle="danger">
                            </div>
                            <div class="form-group col-md-2 col-sm-4">
                                <input type="checkbox" th:checked="${article.allowComment==false}?false:true"
                                    data-toggle="toggle" id="comment" name="comment" data-on="允许评论" data-off="禁止评论"
                                    data-onstyle="success" data-offstyle="danger">
                            </div>
                            <div class="col-md-4 col-sm-4 col-md-offset-1">
                                <a class="btn btn-default" th:href="@{/read/list}">返回列表</a>
                                <button type="button" class="btn btn-primary" onclick="subArticle('publish');">
                                    文章发布
                                </button>
                                <button type="button" class="btn btn-warning" onclick="subArticle('draft');">
                                    存为草稿
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <link rel="stylesheet" th:href="@{/sweetalert2/dist/sweetalert2.min.js}" href="../../static/common/sweetalert2/dist/sweetalert2.min.css" />
        <script th:src="@{/sweetalert2/dist/sweetalert2.all.js}" src="../../static/common/sweetalert2/dist/sweetalert2.all.js"></script>
        <script th:src="@{/common/jQuery-tagsInput/dist/jquery.tagsinput.min.css}" src="../../static/common/jQuery-tagsInput/dist/jquery.tagsinput.min.js"></script>
        <script th:src="@{/common/select2/dist/js/select2.min.js}" src="../../static/common/select2/dist/js/select2.min.js"></script>
        <script th:src="@{/common/bootstrap-toggle/css/bootstrap-toggle.min.css}" src="../../static/common/bootstrap-toggle/js/bootstrap-toggle.min.js"></script>
        <script th:src="@{/common/tale.js}" src="../../static/common/tale.js"></script>
        <script th:src="@{/blog/highlight.pack.js}" src="../../static/blog/highlight.pack.js"></script>
        <script th:src="@{/blog/markdown.js}" src="../../static/blog/markdown.js"></script>
        <script th:src="@{/blog/read.js}" src="../../static/blog/read.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </div>
</body>

</html>