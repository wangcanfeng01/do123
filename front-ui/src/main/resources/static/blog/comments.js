document.writeln("<div th:fragment=\'comments\'>");
document.writeln("    <div th:if=\'${article}!=null\'>");
document.writeln("        <div th:id=\'${article.id ?: 0}\' class=\'comment-container\'>");
document.writeln("            <p class=\'comment-line\'></p>");
document.writeln("            <div id=\'comments\' class=\'clearfix\'>");
document.writeln("                <div th:if=\'${article.allowComment}\'>");
document.writeln("                    <form method=\'post\' id=\'comment-form\' class=\'comment-form\' role=\'form\'");
document.writeln("                          onsubmit=\'return WCFComment.subComment();\'>");
document.writeln("                        <input type=\'hidden\' name=\'id\' id=\'id\' th:value=\'${article.id}\'/>");
document.writeln("                        <textarea name=\'text\' id=\'textarea\' class=\'form-control\' placeholder=\'写下你的评论...\'");
document.writeln("                                  required=\'required\' minlength=\'5\'");
document.writeln("                                  maxlength=\'2000\'></textarea>");
document.writeln("                        <button type=\'submit\' class=\'submit\' id=\'btn-submit\'>发送</button>");
document.writeln("                    </form>");
document.writeln("                </div>");
document.writeln("                <div th:unless=\'${article.allowComment}\'>");
document.writeln("                    <span class=\'response\'>不允许评论.</span>");
document.writeln("                </div>");
document.writeln("                <div th:if=\'${comments}!=null\' style=\'margin-top:100px\'>");
document.writeln("                    <ol class=\'comment-list\'>");
document.writeln("                        <th:block th:each=\'comment:${comments.list}\'>");
document.writeln("                            <li class=\'comment-body comment-parent comment-odd\'>");
document.writeln("                                <div class=\'comment-view\'>");
document.writeln("                                    <div class=\'comment-header\'>");
document.writeln("                                        <!--评论人的头像-->");
document.writeln("                                        <img class=\'img-circle img-responsive avatar\'");
document.writeln("                                             th:src=\'${utils.showPhotoPath(comment.authorId)}\'");
document.writeln("                                             th:title=\'${comment.author}\'");
document.writeln("                                             width=\'80\' height=\'80\'/>");
document.writeln("                                        <!--评论人名字-->");
document.writeln("                                        <span class=\'comment-author\'>");
document.writeln("                                            <a href=\'##\' rel=\'external nofollow\' th:text=\'${comment.author}\'></a>");
document.writeln("                                        </span>");
document.writeln("                                    </div>");
document.writeln("                                    <!--评论的内容-->");
document.writeln("                                    <div class=\'comment-content\'>");
document.writeln("                                        <span class=\'comment-author-at\'>");
document.writeln("                                            <p th:utext=\'${utils.showComment(comment.text)}\'></p>");
document.writeln("                                        </span>");
document.writeln("                                    </div>");
document.writeln("                                    <!--评论时间-->");
document.writeln("                                    <div class=\'comment-meta\'>");
document.writeln("                                        <time th:text=\'${utils.fmtDate(comment.createTime)}\'></time>");
document.writeln("                                        <span class=\'comment-reply\'>");
document.writeln("                                            <div th:if=\'${utils.isMyself(comment.author,loginUser)}\'>");
document.writeln("                                                <button  class=\'btn btn-danger btn-sm\'");
document.writeln("                                                         th:onclick=\'\'WCFComment.deleteComment(\'+${comment.id}+\')\'\'>删除</button>");
document.writeln("                                            </div>");
document.writeln("                                        </span>");
document.writeln("");
document.writeln("                                    </div>");
document.writeln("                                </div>");
document.writeln("                            </li>");
document.writeln("                        </th:block>");
document.writeln("                    </ol>");
document.writeln("                    <div class=\'lists-navigator clearfix\'>");
document.writeln("                        <ol class=\'page-navigator\'>");
document.writeln("                            <!--通过PageInfo中的属性判断相关值-->");
document.writeln("                            <th:block th:if=\'${comments.hasPreviousPage}\'>");
document.writeln("                                <li class=\'prev\'>");
document.writeln("                                    <button class=\'btn btn-default\'>");
document.writeln("                                        <a th:href=\'\'?cp=\'+${comments.prePage}+\'#comments\'\'>上一页</a>");
document.writeln("                                    </button>");
document.writeln("                                </li>");
document.writeln("                            </th:block>");
document.writeln("                            <!--显示5个标签选项页-->");
document.writeln("                            <th:block th:each=\'navIndex :${ comments.navigatepageNums}\'>");
document.writeln("                                <li th:if=\'${navIndex >= comments.pageNum -2 &amp;&amp; comments.pageNum +2 >= navIndex }\'");
document.writeln("                                    th:class=\'${comments.pageNum==navIndex}?\'current\':\'\'\'>");
document.writeln("                                    <button class=\'btn btn-default\'>");
document.writeln("                                        <a th:href=\'\'?cp=\'+${navIndex}+\'#comments\'\' th:text=\'${navIndex}\'></a>");
document.writeln("                                    </button>");
document.writeln("                                </li>");
document.writeln("                            </th:block>");
document.writeln("");
document.writeln("                            <th:block th:if=\'${comments.hasNextPage}\'>");
document.writeln("                                <li class=\'next\'>");
document.writeln("                                    <button class=\'btn btn-default\' id=\'btn1\'>");
document.writeln("                                        <a th:href=\'\'?cp=\'+${comments.nextPage}+\'#comments\'\'>下一页</a>");
document.writeln("                                    </button>");
document.writeln("                                </li>");
document.writeln("                            </th:block>");
document.writeln("                        </ol>");
document.writeln("                    </div>");
document.writeln("");
document.writeln("                </div>");
document.writeln("            </div>");
document.writeln("        </div>");
document.writeln("    </div>");
document.writeln("    <script type=\'text/javascript\'>");
document.writeln("        var tale = new $.tale();");
document.writeln("        (function () {");
document.writeln("            window.WCFComment = {");
document.writeln("                subComment: function () {");
document.writeln("                    $.ajax({");
document.writeln("                        type: \'post\',");
document.writeln("                        url: \'/read/comment/insert\',");
document.writeln("                        data: $(\'#comment-form\').serialize(),");
document.writeln("                        async: true,");
document.writeln("                        dataType: \'json\',");
document.writeln("                        success: function (result) {");
document.writeln("                            if (result && result.success) {");
document.writeln("                                tale.alertOkAndReload(result.msg)");
document.writeln("                            } else {");
document.writeln("                                if (result.msg) {");
document.writeln("                                    tale.alertError(result.msg);");
document.writeln("                                }");
document.writeln("                            }");
document.writeln("                        }");
document.writeln("                    });");
document.writeln("                    return false;");
document.writeln("                },");
document.writeln("                deleteComment: function (id) {");
document.writeln("                    tale.alertConfirm({");
document.writeln("                        title: \'确认删除该评论吗？\',");
document.writeln("                        then: function () {");
document.writeln("                            var url = \'/read/comment/delete/\' + id;");
document.writeln("                            $.ajax({");
document.writeln("                                type: \'delete\',");
document.writeln("                                url: url,");
document.writeln("                                success: function (result) {");
document.writeln("                                    if (result && result.success) {");
document.writeln("                                        tale.alertOkAndReload(result.msg);");
document.writeln("                                    } else {");
document.writeln("                                        if (result.msg) {");
document.writeln("                                            tale.alertError(result.msg);");
document.writeln("                                        }");
document.writeln("                                    }");
document.writeln("                                }");
document.writeln("                            });");
document.writeln("                        }");
document.writeln("                    });");
document.writeln("                }");
document.writeln("            }");
document.writeln("        })();");
document.writeln("    </script>");
document.writeln("</div>");